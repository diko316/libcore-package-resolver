!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("libcore")):"function"==typeof define&&define.amd?define(["exports","libcore"],r):r(e["libcore-package-resolver"]={},e.libcore)}(this,function(e,r){"use strict";var t="Invalid [names] Package collection parameter.",i=function(e){this.id=":"+e,this.name=e,this.registered=!1,this.requires=[]},n=function(){this.names=[],this.packages={}};n.prototype.exists=function(e){var i,n,a,o=r.string,s=this.packages,f=t;if(o(e))return(a=":"+e)in s&&s[a].registered;if(!r.array(e))throw new Error(f);if(i=e.length){for(;i--;){if(n=e[i],!o(n))throw new Error(f);if(!((a=":"+n)in s&&s[a].registered))return!1}return!0}return!1},n.prototype.register=function(e,t){var n,a,o,s,f,c,g,l=r.string,h=this.names,d=this.packages,p=i;if(!l(e))throw new Error("Invalid Package [name] parameter.");if((c=":"+e)in d){if(d[c].registered)throw new Error("Package "+e+" already exists.");g=d[c]}else h[h.length]=e,d[c]=g=new p(e);if(g.registered=!0,l(t)&&(t=[t]),r.array(t))for(s=g.requires,f=0,n=-1,a=t.length;a--;)l(o=t[++n])&&(s[f++]=o);else if(arguments.length>1)throw new Error("Invalid Package [dependencies] parameter.");return this},n.prototype.flatten=function(e){var i,n,a,o,s,f,c,g,l,h,d,p,u=this.packages,w=t,k=r.string;if(k(e)&&(e=[e]),!r.array(e))throw new Error(w);for(p={},s={},f=null,i=-1,n=c=e.length,h=[],d=0;n--;){if(a=e[++i],!k(a))throw new Error(w);if(!((o=":"+a)in u))throw new Error("Package "+a+" do not exist.");if(!(g=u[o]).registered)throw new Error("Package "+a+" is not registered.");if(l=g.requires,c=l.length,!(o in p)){if(c){p[o]=!0,f={parent:f,ender:a,c:i,l:n,items:e,rs:h},e=l,n=c,i=-1,h=[],d=0;continue}o in s||(h[d++]=s[o]=a)}if(!n)for(;f&&(n=f.l,a=f.ender,i=f.c,(e=f.rs).push.apply(e,h),h=e,e=f.items,d=h.length,f=f.parent,(o=":"+a)in s||(h[d++]=s[o]=a),!n););}return h},e.Packager=n,e.default=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=libcore-package-resolver.min.js.map
